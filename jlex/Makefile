BYACC = /home/etud/info/l3info/cedric/Applications/byaccj1.1/yacc.linux
LEX = /home/etud/info/l3info/cedric/Applications/JFlex/bin/jflex 
JAVACMD = javac -classpath .

SOURCES = *.java
SCANNER_L = scanner.lex
PARSER_Y = parser.y
CLAUSE_JAVA = Clause.java
LEXEM_JAVA = Lexem.java
LEXEMTABLE_JAVA = LexemTable.java
LITERAL_JAVA = Literal.java
MAIN_JAVA = Main.java
PARSER_CLASSNAME = Parser
PARSER_JAVA = $(PARSER_CLASSNAME).java
PARSERVAL_JAVA = ParserVal.java
SCANNER_JAVA = Scanner.java
SYMBOL_JAVA = Symbol.java
SYMBOLTABLE_JAVA = SymbolTable.java
TERM_JAVA = Term.java
CLAUSE_CLASS = Clause.class
LEXEM_CLASS = Lexem.class
LEXEMTABLE_CLASS = LexemTable.class
LITERAL_CLASS = Literal.class
MAIN_CLASS = Main.class
PARSER_CLASS = $(PARSER_CLASSNAME).class
PARSERVAL_CLASS = ParserVal.class
SCANNER_CLASS = Scanner.class
SYMBOL_CLASS = Symbol.class
SYMBOLTABLE_CLASS = SymbolTable.class
TERM_CLASS = Term.class

all: $(MAIN_CLASS)
	@echo "Make JFlex TP"

$(CLAUSE_CLASS): $(CLAUSE_JAVA)
	$(JAVACMD) $(CLAUSE_JAVA)

$(LEXEM_CLASS): $(LEXEM_JAVA)
	$(JAVACMD) $(LEXEM_JAVA)

$(LEXEMTABLE_CLASS): $(LEXEMTABLE_JAVA) $(LEXEM_CLASS)
	$(JAVACMD) $(LEXEMTABLE_JAVA)

$(LITERAL_CLASS): $(LITERAL_JAVA) $(TERM_CLASS)
	$(JAVACMD) $(LITERAL_JAVA)

$(PARSER_JAVA): $(SYMBOL_CLASS) $(LEXEM_CLASS) $(TERM_CLASS) $(PERSERVAL_CLASS)
	$(JAVACMD) $(PARSER_JAVA)

$(PARSERVAL_CLASS): $(PARSERVAL_JAVA)
	$(JAVACMD) $(PARSERVAL_JAVA)

$(SCANNER_CLASS): $(SCANNER_JAVA) $(PARSER_CLASS) $(LEXEMTABLE_CLASS) $(PARSERVAL_CLASS)
	$(JAVACMD) $(SCANNER_JAVA)

$(SYMBOL_CLASS): $(SYMBOL_JAVA) $(LEXEM_CLASS)
	$(JAVACMD) $(SYMBOL_JAVA)

$(SYMBOLTABLE_CLASS): $(SYMBOLTABLE_JAVA) $(SYMBOL_CLASS)
	$(JAVACMD) $(SYMBOLTABLE_JAVA)

$(TERM_CLASS): $(TERM_JAVA) $(SYMBOL_CLASS)
	$(JAVACMD) $(TERM_JAVA)

$(MAIN_CLASS): parser_classes $(MAIN_JAVA) $(CLAUSE_CLASS) $(LEXEM_CLASS) $(LEXEMTABLE_CLASS) $(LITERAL_CLASS)  $(PARSERVAL_CLASS) $(SYMBOL_CLASS) $(SYMBOLTABLE_CLASS) $(TERM_CLASS)
	$(JAVACMD) $(MAIN_JAVA)

parser_classes: $(PARSER_JAVA) $(SCANNER_JAVA) $(SYMBOLTABLE_CLASS) $(TERM_CLASS) $(SYMBOL_CLASS)
	$(JAVACMD) $(PARSER_JAVA) $(SCANNER_JAVA)

$(PARSER_JAVA): $(PARSER_Y)
	$(BYACC) -Jclass=$(PARSER_CLASSNAME) $(PARSER_Y)

$(SCANNER_JAVA): $(SCANNER_L)
	$(LEX) $(SCANNER_L)

clean:
	rm -f $(PARSER_JAVA)
	rm -f $(SCANNER_JAVA)
	rm -f *.class